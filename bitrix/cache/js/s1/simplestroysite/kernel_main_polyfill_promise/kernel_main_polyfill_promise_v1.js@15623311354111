; /* /bitrix/js/main/polyfill/promise/js/promise.js?15519481263826*/

; /* Start:"a:4:{s:4:"full";s:61:"/bitrix/js/main/polyfill/promise/js/promise.js?15519481263826";s:6:"source";s:46:"/bitrix/js/main/polyfill/promise/js/promise.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
;(function(window){'use strict';if(typeof window.Promise==='undefined'||window.Promise.toString().indexOf('[native code]')===-1){var PROMISE_STATUS='[[PromiseStatus]]';var PROMISE_VALUE='[[PromiseValue]]';var STATUS_PENDING='pending';var STATUS_INTERNAL_PENDING='internal pending';var STATUS_RESOLVED='resolved';var STATUS_REJECTED='rejected';var handle=function(promise,deferred){if(promise[PROMISE_STATUS]===STATUS_INTERNAL_PENDING){promise=promise[PROMISE_VALUE];}if(promise[PROMISE_STATUS]===STATUS_PENDING){promise.deferreds.push(deferred);}else{promise.handled=true;setTimeout(function(){var callback=promise[PROMISE_STATUS]===STATUS_RESOLVED?deferred.onFulfilled:deferred.onRejected;if(callback){try{resolve(deferred.promise,callback(promise[PROMISE_VALUE]));}catch(err){reject(deferred.promise,err);}}else{if(promise[PROMISE_STATUS]===STATUS_RESOLVED){resolve(deferred.promise,promise[PROMISE_VALUE]);}else{reject(deferred.promise,promise[PROMISE_VALUE]);}}},0);}};var resolve=function(promise,value){if(value===promise){throw new TypeError('A promise cannot be resolved with it promise.');}try{if(value&&(typeof value==='object'||typeof value==='function')){if(value instanceof Promise){promise[PROMISE_STATUS]=STATUS_INTERNAL_PENDING;promise[PROMISE_VALUE]=value;finale(promise);return;}else if(typeof value.then==='function'){executePromise(value.then.bind(value),promise);return;}}promise[PROMISE_STATUS]=STATUS_RESOLVED;promise[PROMISE_VALUE]=value;finale(promise);}catch(err){reject(promise,err);}};var reject=function(promise,reason){promise[PROMISE_STATUS]=STATUS_REJECTED;promise[PROMISE_VALUE]=reason;finale(promise);};var finale=function(promise){if(promise[PROMISE_STATUS]===STATUS_REJECTED&&promise.deferreds.length===0){setTimeout(function(){if(!promise.handled){console.error('Unhandled Promise Rejection: '+promise[PROMISE_VALUE]);}},0);}promise.deferreds.forEach(function(deferred){handle(promise,deferred);});promise.deferreds=null;};var executePromise=function(resolver,promise){var done=false;try{resolver(resolveWrapper,rejectWrapper);}catch(err){if(!done){done=true;reject(promise,err);}}function resolveWrapper(value){if(!done){done=true;resolve(promise,value);}}function rejectWrapper(reason){if(!done){done=true;reject(promise,reason);}}};var Handler=function(onFulfilled,onRejected,promise){this.onFulfilled=typeof onFulfilled==='function'?onFulfilled:null;this.onRejected=typeof onRejected==='function'?onRejected:null;this.promise=promise;};var Promise=function(resolver){this[PROMISE_STATUS]=STATUS_PENDING;this[PROMISE_VALUE]=null;this.handled=false;this.deferreds=[];executePromise(resolver,this);};Promise.prototype['catch']=function(onRejected){return this.then(null,onRejected);};Promise.prototype.then=function(onFulfilled,onRejected){var promise=new Promise(function(){});handle(this,new Handler(onFulfilled,onRejected,promise));return promise;};Promise.all=function(iterable){var args=[].slice.call(iterable);return new Promise(function(resolve,reject){if(args.length===0){resolve(args);}else{var remaining=args.length;var res=function(i,val){try{if(val&&(typeof val==='object'||typeof val==='function')){if(typeof val.then==='function'){val.then.call(val,function(val){res(i,val);},reject);return;}}args[i]=val;if(--remaining===0){resolve(args);}}catch(ex){reject(ex);}};for(var i=0;i<args.length;i++){res(i,args[i]);}}});};Promise.resolve=function(value){if(value&&typeof value==='object'&&value.constructor===Promise){return value;}return new Promise(function(resolve){resolve(value);});};Promise.reject=function(reason){return new Promise(function(resolve,reject){reject(reason);});};Promise.race=function(iterable){return new Promise(function(resolve,reject){for(var i=0,len=iterable.length;i<len;i++){iterable[i].then(resolve,reject);}});};window.Promise=Promise;}})(window);
/* End */
;